<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="au.com.thoughtpatterns.core.bo.bos">

  <!-- DateBO -->

  <typeAlias alias="DateBO" type="au.com.thoughtpatterns.core.bo.bos.DateBO"/>

  <resultMap id="DateBOResult" class="DateBO"
      extends="au.com.thoughtpatterns.core.bo.ManagedObjectResult">
    <result property="startDate" column="start_date"/>
    <result property="finishDate" column="end_date"/>
    <result property="amount" column="payment_cents"/>

  </resultMap>

  <select id="au.com.thoughtpatterns.core.bo.bos.DateBO.load" 
  		parameterClass="long"
  		resultMap="DateBOResult">
    select * from test_date where id = #id#
  </select>

  <select id="au.com.thoughtpatterns.core.bo.bos.DateBO.bulkload" 
  		parameterClass="list"
  		resultMap="DateBOResult">
    select * from test_date where id in
    <iterate open="(" close=")" conjunction=",">#[]#</iterate>
  </select>
   

  <insert id="au.com.thoughtpatterns.core.bo.bos.DateBO.insert" parameterClass="DateBO">
    insert into test_date (
      id,
      start_date, end_date, payment_cents, 
      audit_id
    ) values (
      #id#, #startDate#, #finishDate#, #amount#,  #activityId#
    )
  </insert>

  <update id="au.com.thoughtpatterns.core.bo.bos.DateBO.update" parameterClass="DateBO">
    update test_date set
      start_date = #startDate#, end_date = #finishDate#, payment_cents = #amount#, 
      audit_id = #activityId#
    where
      id = #id# and audit_id = #loadedActivityId#
  </update>
  
  <delete id="au.com.thoughtpatterns.core.bo.bos.DateBO.delete" parameterClass="long">
    delete from test_date where id = #id#
  </delete>

</sqlMap>
