<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="au.com.thoughtpatterns.core.bo.bos">

  <!-- Use type aliases to avoid typing the full classname every time. -->
  <typeAlias alias="AltAddress" type="au.com.thoughtpatterns.core.bo.bos.AltAddress"/>

  <resultMap id="AltAddressResult" class="AltAddress"
      extends="au.com.thoughtpatterns.core.bo.ManagedObjectResult">
    <result property="streetNumber" column="street_number"/>
    <result property="streetName" column="street_name"/>
    <result property="country" column="country"/>
  </resultMap>

  <select id="au.com.thoughtpatterns.core.bo.bos.AltAddress.dependentLoad" 
  		parameterClass="long"
  		resultMap="AltAddressResult">
    select * from test_address where person_id = #id# order by id
  </select>
   
  <insert id="au.com.thoughtpatterns.core.bo.bos.AltAddress.insert" parameterClass="AltAddress">
    insert into test_address (
      id,
      street_number,
      street_name,
      country,
      person_id
    ) values (
      #id#, #streetNumber#, #streetName#, #country#, #parentId#
    )
  </insert>

  <update id="au.com.thoughtpatterns.core.bo.bos.AltAddress.update" parameterClass="AltAddress">
    update test_address set
      street_number = #streetNumber#,
      street_name = #streetName#,
      country = #country#,
      person_id = #parentId#
    where
      id = #id#
  </update>
  
  <delete id="au.com.thoughtpatterns.core.bo.bos.AltAddress.delete" parameterClass="long">
    delete from test_address where id = #id#
  </delete>

</sqlMap>